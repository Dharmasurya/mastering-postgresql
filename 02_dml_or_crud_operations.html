
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DML or CRUD Operations &#8212; My Jupyter Book</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Writing Basic SQL Queries" href="03_writing_basic_sql_queries.html" />
    <link rel="prev" title="Getting Started" href="01_getting_started.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">My Jupyter Book</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="mastering-postgresql.html">
   Mastering Postgresql
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="01_getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   DML or CRUD Operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_writing_basic_sql_queries.html">
   Writing Basic SQL Queries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_creating_tables_and_indexes.html">
   Creating Tables and Indexes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_partitioning_tables_and_indexes.html">
   Partitioning Tables and Indexes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_predefined_functions.html">
   Pre-Defined Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_writing_advanced_sql_queries.html">
   Writing Advanced SQL Queries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08_query_performance_tuning.html">
   Query Performance Tuning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mastering_postgresql_exercises.html">
   Exercises - Mastering Postgresql
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/02_dml_or_crud_operations.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/02_dml_or_crud_operations.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#normalization-principles">
   Normalization Principles
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reporting-environments">
     Reporting Environments
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#normal-forms-key-terms">
     Normal Forms - Key Terms
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tables-as-relations">
   Tables as Relations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#database-operations-overview">
   Database Operations - Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#crud-operations">
   CRUD Operations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-table">
   Creating Table
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inserting-data">
   Inserting Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#updating-data">
   Updating Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deleting-data">
   Deleting Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview-of-transactions">
   Overview of Transactions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-database-operations">
   Exercise - Database Operations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-1-create-table">
     Exercise 1 - Create Table
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-2-inserting-data">
     Exercise 2 - Inserting Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-3-updating-data">
     Exercise 3 - Updating Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-4-deleting-data">
     Exercise 4 - Deleting Data
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="dml-or-crud-operations">
<h1>DML or CRUD Operations<a class="headerlink" href="#dml-or-crud-operations" title="Permalink to this headline">¶</a></h1>
<p>Let us understand how to perform CRUD operations using Postgresql.</p>
<ul class="simple">
<li><p>Normalization Principles</p></li>
<li><p>Tables as Relations</p></li>
<li><p>Database Operations - Overview</p></li>
<li><p>CRUD Operations</p></li>
<li><p>Creating Table</p></li>
<li><p>Inserting Data</p></li>
<li><p>Updating Data</p></li>
<li><p>Deleting Data</p></li>
<li><p>Overview of Transactions</p></li>
<li><p>Exercise - Database Operations</p></li>
</ul>
<p>Here are the key objectives of this section.</p>
<ul class="simple">
<li><p>What are the different types of Database Operations?</p></li>
<li><p>How DML is related to CRUD Operations?</p></li>
<li><p>How to insert new records into table?</p></li>
<li><p>How to update existing data in a table?</p></li>
<li><p>How the data is typically deleted from a table?</p></li>
<li><p>You will also get a brief overview about Database Operations?</p></li>
<li><p>Self evaluate whether you gain enough skills related to performing CRUD or DML operations or not using exercieses</p></li>
</ul>
<div class="section" id="normalization-principles">
<h2>Normalization Principles<a class="headerlink" href="#normalization-principles" title="Permalink to this headline">¶</a></h2>
<p>Let us get an overview about Normalization Principles.</p>
<p>Here are different normal forms we use. Provided links are from Wiki.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/First_normal_form">1st Normal Form</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Second_normal_form">2nd Normal Form</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Third_normal_form">3rd Normal Form</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form">Boyce Codd Normal Form</a></p></li>
</ul>
<p>Most of the well designed Data Models will be in either 3rd Normal Form. BCNF is used in some extreme cases where 3rd Normal Form does not eliminate all insertion, updation and deletion anomalies.</p>
<div class="section" id="reporting-environments">
<h3>Reporting Environments<a class="headerlink" href="#reporting-environments" title="Permalink to this headline">¶</a></h3>
<p>While normalization is extensively used for transactional systems, they are not ideal for reporting or descision support systems. We tend to use dimensional modeling for reporting systems where tables will contain pre processed data as per the report requirements.</p>
</div>
<div class="section" id="normal-forms-key-terms">
<h3>Normal Forms - Key Terms<a class="headerlink" href="#normal-forms-key-terms" title="Permalink to this headline">¶</a></h3>
<p>Let us understand some of the key terms we use while going through the normal forms.</p>
<ul class="simple">
<li><p>Domain</p></li>
<li><p>Attribute</p></li>
<li><p>Atomic (indivisible)</p></li>
<li><p>Functionally Dependent</p></li>
<li><p>Prime Attribute</p></li>
<li><p>Candidate Key</p></li>
<li><p>Data Anomalies - potential issues to data due to the mistakes by users or developers</p></li>
<li><p>Transitive Dependency</p></li>
</ul>
</div>
</div>
<div class="section" id="tables-as-relations">
<h2>Tables as Relations<a class="headerlink" href="#tables-as-relations" title="Permalink to this headline">¶</a></h2>
<p>Let us understand details about relations and different types of relationships we typically use.</p>
<ul class="simple">
<li><p>In RDBMS - R stands for Relational.</p></li>
<li><p>In the transactional systems, tables are created using normalization principles. There will be relations or tables created based on relationships among them.</p></li>
<li><p>Here are the typical relationships among the tables.</p>
<ul>
<li><p>1 to 1</p></li>
<li><p>1 to many or many to 1 (1 to n or n to 1)</p></li>
<li><p>many to many (m to n)</p></li>
</ul>
</li>
<li><p>To <strong>enforce</strong> relationships we typically define constraints such as <strong>Primary Key</strong> and <strong>Foreign Key</strong>.</p></li>
<li><p>Here is the typical process we follow from requirements to physical database tables before building applications.</p>
<ul>
<li><p>Identify entities based up on the requirements.</p></li>
<li><p>Define relationships among them.</p></li>
<li><p>Create ER Diagram (Entity Relationship Diagram). It is also called as Logical Data Model.</p></li>
<li><p>Apply Normalization Principles on the entities to identify tables and constraints to manage relationships among them.</p></li>
<li><p>Come up with Physical Data Model and generate required DDL Scripts.</p></li>
<li><p>Execute the scripts in the database on which applications will be eventually build based up on business requirements.</p></li>
</ul>
</li>
<li><p>Logical modeling is typically done by Data Architects.</p></li>
<li><p>Physical modeling is taken care by Application Architect or Development lead.</p></li>
<li><p>Let us go through <a class="reference external" href="https://docs.oracle.com/cd/B28359_01/server.111/b28328/diagrams.htm">data model</a> related to HR and OE systems.</p>
<ul>
<li><p>Identify the relationships between the tables.</p></li>
<li><p>Differentiate between transactional tables and non transactional tables.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="database-operations-overview">
<h2>Database Operations - Overview<a class="headerlink" href="#database-operations-overview" title="Permalink to this headline">¶</a></h2>
<p>Let us get an overview of Database Operations we typically perform on regular basis. They are broadly categorized into the following:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ws3slfbSpC4?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>DDL - Data Definition Language</p>
<ul>
<li><p>CREATE/ALTER/DROP Tables</p></li>
<li><p>CREATE/ALTER/DROP Indexes</p></li>
<li><p>Add constraints to tables</p></li>
<li><p>CREATE/ALTER/DROP Views</p></li>
<li><p>CREATE/ALTER/DROP Sequences</p></li>
</ul>
</li>
<li><p>DML - Data Manipulation Language</p>
<ul>
<li><p>Inserting new data into the table</p></li>
<li><p>Updating existing data in the table</p></li>
<li><p>Deleting existing data from the table</p></li>
</ul>
</li>
<li><p>DQL - Data Query Language</p>
<ul>
<li><p>Read the data from the table</p></li>
</ul>
</li>
</ul>
<p>On top of these we also use TCL (Transaction Control Language) which include <strong>COMMIT</strong> and <strong>ROLLBACK</strong>.</p>
<p>As part of this section in the subsequent topics we will primarily focus on basic DDL and DML.</p>
</div>
<div class="section" id="crud-operations">
<h2>CRUD Operations<a class="headerlink" href="#crud-operations" title="Permalink to this headline">¶</a></h2>
<p>Let us get an overview of CRUD Operations. They are nothing but DML and queries to read the data while performing database operations.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/QjOuleXn0xE?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>CRUD is widely used from application development perspective.</p></li>
<li><p>C - CREATE (INSERT)</p></li>
<li><p>R - READ (READ)</p></li>
<li><p>U - UPDATE (UPDATE)</p></li>
<li><p>D - DELETE (DELETE)</p></li>
</ul>
<p>As part of the application development process we perform CRUD Operations using REST APIs.</p>
</div>
<div class="section" id="creating-table">
<h2>Creating Table<a class="headerlink" href="#creating-table" title="Permalink to this headline">¶</a></h2>
<p>Before getting into action with respect to basic DML and queries or CRUD operations, we need to prepare tables.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ejuzd4QQsHg?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<p>At this time we have not covered DDL yet. All database operations related to managing tables come under DDL.</p>
<p>For now, let’s just create the table by copy pasting below <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement. We will get into concepts as part of the subsequent sections.</p>
<ul class="simple">
<li><p>Connect to the database.</p></li>
<li><p>Create the table.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> sql
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">env</span> DATABASE_URL=postgresql://itversity_sms_user:sms_password@localhost:5432/itversity_sms_db
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>env: DATABASE_URL=postgresql://itversity_sms_user:sms_password@localhost:5432/itversity_sms_db
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

SELECT * FROM information_schema.tables 
WHERE table_catalog = &#39;itversity_sms_db&#39; AND table_schema = &#39;public&#39;
LIMIT 10
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>table_catalog</th>
        <th>table_schema</th>
        <th>table_name</th>
        <th>table_type</th>
        <th>self_referencing_column_name</th>
        <th>reference_generation</th>
        <th>user_defined_type_catalog</th>
        <th>user_defined_type_schema</th>
        <th>user_defined_type_name</th>
        <th>is_insertable_into</th>
        <th>is_typed</th>
        <th>commit_action</th>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>courses</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

DROP TABLE IF EXISTS users;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
Done.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

SELECT * FROM information_schema.tables 
WHERE table_catalog = &#39;itversity_sms_db&#39; AND table_schema = &#39;public&#39;
LIMIT 10
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>table_catalog</th>
        <th>table_schema</th>
        <th>table_name</th>
        <th>table_type</th>
        <th>self_referencing_column_name</th>
        <th>reference_generation</th>
        <th>user_defined_type_catalog</th>
        <th>user_defined_type_schema</th>
        <th>user_defined_type_name</th>
        <th>is_insertable_into</th>
        <th>is_typed</th>
        <th>commit_action</th>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>courses</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    user_first_name VARCHAR(30) NOT NULL,
    user_last_name VARCHAR(30) NOT NULL,
    user_email_id VARCHAR(50) NOT NULL,
    user_email_validated BOOLEAN DEFAULT FALSE,
    user_password VARCHAR(200),
    user_role VARCHAR(1) NOT NULL DEFAULT &#39;U&#39;, --U and A
    is_active BOOLEAN DEFAULT FALSE,
    create_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_updated_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
Done.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Let us validate the objects that are created in the underlying database. We can either run query against <strong>information_schema</strong> or use Database Explorer in <strong>SQL Workbench</strong> or even <code class="docutils literal notranslate"><span class="pre">psql</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

SELECT * FROM information_schema.tables 
WHERE table_catalog = &#39;itversity_sms_db&#39; AND table_schema = &#39;public&#39;
LIMIT 10
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>table_catalog</th>
        <th>table_schema</th>
        <th>table_name</th>
        <th>table_type</th>
        <th>self_referencing_column_name</th>
        <th>reference_generation</th>
        <th>user_defined_type_catalog</th>
        <th>user_defined_type_schema</th>
        <th>user_defined_type_name</th>
        <th>is_insertable_into</th>
        <th>is_typed</th>
        <th>commit_action</th>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

SELECT * FROM information_schema.columns 
WHERE table_name = &#39;users&#39;
LIMIT 10
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
10 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>table_catalog</th>
        <th>table_schema</th>
        <th>table_name</th>
        <th>column_name</th>
        <th>ordinal_position</th>
        <th>column_default</th>
        <th>is_nullable</th>
        <th>data_type</th>
        <th>character_maximum_length</th>
        <th>character_octet_length</th>
        <th>numeric_precision</th>
        <th>numeric_precision_radix</th>
        <th>numeric_scale</th>
        <th>datetime_precision</th>
        <th>interval_type</th>
        <th>interval_precision</th>
        <th>character_set_catalog</th>
        <th>character_set_schema</th>
        <th>character_set_name</th>
        <th>collation_catalog</th>
        <th>collation_schema</th>
        <th>collation_name</th>
        <th>domain_catalog</th>
        <th>domain_schema</th>
        <th>domain_name</th>
        <th>udt_catalog</th>
        <th>udt_schema</th>
        <th>udt_name</th>
        <th>scope_catalog</th>
        <th>scope_schema</th>
        <th>scope_name</th>
        <th>maximum_cardinality</th>
        <th>dtd_identifier</th>
        <th>is_self_referencing</th>
        <th>is_identity</th>
        <th>identity_generation</th>
        <th>identity_start</th>
        <th>identity_increment</th>
        <th>identity_maximum</th>
        <th>identity_minimum</th>
        <th>identity_cycle</th>
        <th>is_generated</th>
        <th>generation_expression</th>
        <th>is_updatable</th>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_id</td>
        <td>1</td>
        <td>nextval(&#x27;users_user_id_seq&#x27;::regclass)</td>
        <td>NO</td>
        <td>integer</td>
        <td>None</td>
        <td>None</td>
        <td>32</td>
        <td>2</td>
        <td>0</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>int4</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>1</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_first_name</td>
        <td>2</td>
        <td>None</td>
        <td>NO</td>
        <td>character varying</td>
        <td>30</td>
        <td>120</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>varchar</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>2</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_last_name</td>
        <td>3</td>
        <td>None</td>
        <td>NO</td>
        <td>character varying</td>
        <td>30</td>
        <td>120</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>varchar</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>3</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_email_id</td>
        <td>4</td>
        <td>None</td>
        <td>NO</td>
        <td>character varying</td>
        <td>50</td>
        <td>200</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>varchar</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>4</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_email_validated</td>
        <td>5</td>
        <td>false</td>
        <td>YES</td>
        <td>boolean</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>bool</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>5</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_password</td>
        <td>6</td>
        <td>None</td>
        <td>YES</td>
        <td>character varying</td>
        <td>200</td>
        <td>800</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>varchar</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>6</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>user_role</td>
        <td>7</td>
        <td>&#x27;U&#x27;::character varying</td>
        <td>NO</td>
        <td>character varying</td>
        <td>1</td>
        <td>4</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>varchar</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>7</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>is_active</td>
        <td>8</td>
        <td>false</td>
        <td>YES</td>
        <td>boolean</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>bool</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>8</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>create_ts</td>
        <td>9</td>
        <td>CURRENT_TIMESTAMP</td>
        <td>YES</td>
        <td>timestamp without time zone</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>6</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>timestamp</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>9</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
    <tr>
        <td>itversity_sms_db</td>
        <td>public</td>
        <td>users</td>
        <td>last_updated_ts</td>
        <td>10</td>
        <td>CURRENT_TIMESTAMP</td>
        <td>YES</td>
        <td>timestamp without time zone</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>6</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>itversity_sms_db</td>
        <td>pg_catalog</td>
        <td>timestamp</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>10</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NEVER</td>
        <td>None</td>
        <td>YES</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
0 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
</table></div></div>
</div>
</div>
<div class="section" id="inserting-data">
<h2>Inserting Data<a class="headerlink" href="#inserting-data" title="Permalink to this headline">¶</a></h2>
<p>Let us see how to insert the data into the table.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/JbqM5xxh-KY?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>We need to use INSERT clause to insert the data. Here is the sample syntax.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span><span class="p">)</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">,</span> <span class="n">val3</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If we don’t pass columns after table name then we need to specify values for all the columns. It is not good practice to insert records with out specifying column names.</p></li>
<li><p>If we do not specify value for <code class="docutils literal notranslate"><span class="pre">SERIAL</span></code> field, a sequence generated number will be used.</p></li>
<li><p>It is not mandatory to pass the values for those fields where <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> is specified. Values specified in <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> clause will be used.</p></li>
<li><p>It is mandatory to specify columns and corresponding values for all columns where <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code> is specified.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> sql
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The sql extension is already loaded. To reload it, use:
  %reload_ext sql
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">env</span> DATABASE_URL=postgresql://itversity_sms_user:sms_password@localhost:5432/itversity_sms_db
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>env: DATABASE_URL=postgresql://itversity_sms_user:sms_password@localhost:5432/itversity_sms_db
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> TRUNCATE TABLE users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
Done.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

INSERT INTO users (user_first_name, user_last_name, user_email_id)
VALUES (&#39;Scott&#39;, &#39;Tiger&#39;, &#39;scott@tiger.com&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

INSERT INTO users (user_first_name, user_last_name, user_email_id)
VALUES (&#39;Donald&#39;, &#39;Duck&#39;, &#39;donald@duck.com&#39;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
2 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>donald@duck.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:14.495991</td>
        <td>2020-11-14 15:35:14.495991</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

INSERT INTO users (user_first_name, user_last_name, user_email_id, user_role, is_active)
VALUES (&#39;Mickey&#39;, &#39;Mouse&#39;, &#39;mickey@mouse.com&#39;, &#39;U&#39;, true)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
3 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>donald@duck.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:14.495991</td>
        <td>2020-11-14 15:35:14.495991</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>mickey@mouse.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:15.881686</td>
        <td>2020-11-14 15:35:15.881686</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

INSERT INTO users 
    (user_first_name, user_last_name, user_email_id, user_password, user_role, is_active) 
VALUES 
    (&#39;Gordan&#39;, &#39;Bradock&#39;, &#39;gbradock0@barnesandnoble.com&#39;, &#39;h9LAz7p7ub&#39;, &#39;U&#39;, true),
    (&#39;Tobe&#39;, &#39;Lyness&#39;, &#39;tlyness1@paginegialle.it&#39;, &#39;oEofndp&#39;, &#39;U&#39;, true),
    (&#39;Addie&#39;, &#39;Mesias&#39;, &#39;amesias2@twitpic.com&#39;, &#39;ih7Y69u56&#39;, &#39;U&#39;, true)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
3 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>donald@duck.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:14.495991</td>
        <td>2020-11-14 15:35:14.495991</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>mickey@mouse.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:15.881686</td>
        <td>2020-11-14 15:35:15.881686</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Gordan</td>
        <td>Bradock</td>
        <td>gbradock0@barnesandnoble.com</td>
        <td>False</td>
        <td>h9LAz7p7ub</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Tobe</td>
        <td>Lyness</td>
        <td>tlyness1@paginegialle.it</td>
        <td>False</td>
        <td>oEofndp</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Addie</td>
        <td>Mesias</td>
        <td>amesias2@twitpic.com</td>
        <td>False</td>
        <td>ih7Y69u56</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
</table></div></div>
</div>
</div>
<div class="section" id="updating-data">
<h2>Updating Data<a class="headerlink" href="#updating-data" title="Permalink to this headline">¶</a></h2>
<p>Let us see how we can update data in the table.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/vGrx2HMHEJ0?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>Typical syntax</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
<span class="k">SET</span>
    <span class="n">col1</span> <span class="o">=</span> <span class="n">val1</span><span class="p">,</span>
    <span class="n">col2</span> <span class="o">=</span> <span class="n">val2</span>
<span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> condition is not specified all rows in the table will be updated.</p></li>
<li><p>For now we will see basic examples for update. One need to have good knowledge about <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause to take care of complex conditions. Using <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> will be covered extensively as part of filtering the data at a later point in time.</p></li>
</ul>
<ul class="simple">
<li><p>Set user role for user_id 1 as ‘A’</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>donald@duck.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:14.495991</td>
        <td>2020-11-14 15:35:14.495991</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>mickey@mouse.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:15.881686</td>
        <td>2020-11-14 15:35:15.881686</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Gordan</td>
        <td>Bradock</td>
        <td>gbradock0@barnesandnoble.com</td>
        <td>False</td>
        <td>h9LAz7p7ub</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Tobe</td>
        <td>Lyness</td>
        <td>tlyness1@paginegialle.it</td>
        <td>False</td>
        <td>oEofndp</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Addie</td>
        <td>Mesias</td>
        <td>amesias2@twitpic.com</td>
        <td>False</td>
        <td>ih7Y69u56</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

UPDATE users 
    SET user_role = &#39;A&#39; 
WHERE user_id = 1
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_email_id</th>
        <th>user_email_validated</th>
        <th>user_password</th>
        <th>user_role</th>
        <th>is_active</th>
        <th>create_ts</th>
        <th>last_updated_ts</th>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>donald@duck.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>False</td>
        <td>2020-11-14 15:35:14.495991</td>
        <td>2020-11-14 15:35:14.495991</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>mickey@mouse.com</td>
        <td>False</td>
        <td>None</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:15.881686</td>
        <td>2020-11-14 15:35:15.881686</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Gordan</td>
        <td>Bradock</td>
        <td>gbradock0@barnesandnoble.com</td>
        <td>False</td>
        <td>h9LAz7p7ub</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Tobe</td>
        <td>Lyness</td>
        <td>tlyness1@paginegialle.it</td>
        <td>False</td>
        <td>oEofndp</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Addie</td>
        <td>Mesias</td>
        <td>amesias2@twitpic.com</td>
        <td>False</td>
        <td>ih7Y69u56</td>
        <td>U</td>
        <td>True</td>
        <td>2020-11-14 15:35:20.938583</td>
        <td>2020-11-14 15:35:20.938583</td>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>scott@tiger.com</td>
        <td>False</td>
        <td>None</td>
        <td>A</td>
        <td>False</td>
        <td>2020-11-14 15:35:11.813351</td>
        <td>2020-11-14 15:35:11.813351</td>
    </tr>
</table></div></div>
</div>
<ul class="simple">
<li><p>Set user_email_validated as well as is_active to true for all users</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_email_validated, is_active FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_email_validated</th>
        <th>is_active</th>
    </tr>
    <tr>
        <td>2</td>
        <td>False</td>
        <td>False</td>
    </tr>
    <tr>
        <td>3</td>
        <td>False</td>
        <td>True</td>
    </tr>
    <tr>
        <td>4</td>
        <td>False</td>
        <td>True</td>
    </tr>
    <tr>
        <td>5</td>
        <td>False</td>
        <td>True</td>
    </tr>
    <tr>
        <td>6</td>
        <td>False</td>
        <td>True</td>
    </tr>
    <tr>
        <td>1</td>
        <td>False</td>
        <td>False</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

UPDATE users
SET
    user_email_validated = true,
    is_active = true
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_email_validated, is_active FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_email_validated</th>
        <th>is_active</th>
    </tr>
    <tr>
        <td>2</td>
        <td>True</td>
        <td>True</td>
    </tr>
    <tr>
        <td>3</td>
        <td>True</td>
        <td>True</td>
    </tr>
    <tr>
        <td>4</td>
        <td>True</td>
        <td>True</td>
    </tr>
    <tr>
        <td>5</td>
        <td>True</td>
        <td>True</td>
    </tr>
    <tr>
        <td>6</td>
        <td>True</td>
        <td>True</td>
    </tr>
    <tr>
        <td>1</td>
        <td>True</td>
        <td>True</td>
    </tr>
</table></div></div>
</div>
<ul class="simple">
<li><p>Convert case of user_email_id to upper for all the records</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_email_id FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_email_id</th>
    </tr>
    <tr>
        <td>2</td>
        <td>donald@duck.com</td>
    </tr>
    <tr>
        <td>3</td>
        <td>mickey@mouse.com</td>
    </tr>
    <tr>
        <td>4</td>
        <td>gbradock0@barnesandnoble.com</td>
    </tr>
    <tr>
        <td>5</td>
        <td>tlyness1@paginegialle.it</td>
    </tr>
    <tr>
        <td>6</td>
        <td>amesias2@twitpic.com</td>
    </tr>
    <tr>
        <td>1</td>
        <td>scott@tiger.com</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

UPDATE users
SET
    user_email_id = upper(user_email_id)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_email_id FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_email_id</th>
    </tr>
    <tr>
        <td>2</td>
        <td>DONALD@DUCK.COM</td>
    </tr>
    <tr>
        <td>3</td>
        <td>MICKEY@MOUSE.COM</td>
    </tr>
    <tr>
        <td>4</td>
        <td>GBRADOCK0@BARNESANDNOBLE.COM</td>
    </tr>
    <tr>
        <td>5</td>
        <td>TLYNESS1@PAGINEGIALLE.IT</td>
    </tr>
    <tr>
        <td>6</td>
        <td>AMESIAS2@TWITPIC.COM</td>
    </tr>
    <tr>
        <td>1</td>
        <td>SCOTT@TIGER.COM</td>
    </tr>
</table></div></div>
</div>
<ul class="simple">
<li><p>Add new column by name <strong>user_full_name</strong> and update it by concatenating <strong>user_first_name</strong> and <strong>user_last_name</strong>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

ALTER TABLE users ADD COLUMN user_full_name VARCHAR(50)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
Done.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_first_name, user_last_name, user_full_name FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_full_name</th>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>None</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>None</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Gordan</td>
        <td>Bradock</td>
        <td>None</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Tobe</td>
        <td>Lyness</td>
        <td>None</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Addie</td>
        <td>Mesias</td>
        <td>None</td>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT concat(user_first_name, &#39; &#39;, user_last_name) FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>concat</th>
    </tr>
    <tr>
        <td>Donald Duck</td>
    </tr>
    <tr>
        <td>Mickey Mouse</td>
    </tr>
    <tr>
        <td>Gordan Bradock</td>
    </tr>
    <tr>
        <td>Tobe Lyness</td>
    </tr>
    <tr>
        <td>Addie Mesias</td>
    </tr>
    <tr>
        <td>Scott Tiger</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

UPDATE users
    SET user_full_name = upper(concat(user_first_name, &#39; &#39;, user_last_name))
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_first_name, user_last_name, user_full_name FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_first_name</th>
        <th>user_last_name</th>
        <th>user_full_name</th>
    </tr>
    <tr>
        <td>2</td>
        <td>Donald</td>
        <td>Duck</td>
        <td>DONALD DUCK</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Mickey</td>
        <td>Mouse</td>
        <td>MICKEY MOUSE</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Gordan</td>
        <td>Bradock</td>
        <td>GORDAN BRADOCK</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Tobe</td>
        <td>Lyness</td>
        <td>TOBE LYNESS</td>
    </tr>
    <tr>
        <td>6</td>
        <td>Addie</td>
        <td>Mesias</td>
        <td>ADDIE MESIAS</td>
    </tr>
    <tr>
        <td>1</td>
        <td>Scott</td>
        <td>Tiger</td>
        <td>SCOTT TIGER</td>
    </tr>
</table></div></div>
</div>
</div>
<div class="section" id="deleting-data">
<h2>Deleting Data<a class="headerlink" href="#deleting-data" title="Permalink to this headline">¶</a></h2>
<p>Let us understand how to delete the data from a table.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/vcow_3IeaII?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>Typical Syntax - <code class="docutils literal notranslate"><span class="pre">DELETE</span> <span class="pre">FROM</span> <span class="pre">&lt;table&gt;</span> <span class="pre">WHERE</span> <span class="pre">&lt;condition&gt;</span></code>.</p></li>
<li><p>If we do not specify condition, it will delete all the data from the table.</p></li>
<li><p>It is not recommended to use delete with out where condition to delete all the data (instead we should use <code class="docutils literal notranslate"><span class="pre">TRUNCATE</span></code>).</p></li>
<li><p>For now we will see basic examples for delete. One need to have good knowledge about <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause to take care of complex conditions.</p></li>
<li><p>Let’s see how we can delete all those records from users where the password is not set. We need to use <code class="docutils literal notranslate"><span class="pre">IS</span> <span class="pre">NULL</span></code> as condition to compare against Null values.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_password FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
6 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_password</th>
    </tr>
    <tr>
        <td>2</td>
        <td>None</td>
    </tr>
    <tr>
        <td>3</td>
        <td>None</td>
    </tr>
    <tr>
        <td>4</td>
        <td>h9LAz7p7ub</td>
    </tr>
    <tr>
        <td>5</td>
        <td>oEofndp</td>
    </tr>
    <tr>
        <td>6</td>
        <td>ih7Y69u56</td>
    </tr>
    <tr>
        <td>1</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> DELETE FROM users WHERE user_password IS NULL
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
3 rows affected.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT user_id, user_password FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
3 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>user_id</th>
        <th>user_password</th>
    </tr>
    <tr>
        <td>4</td>
        <td>h9LAz7p7ub</td>
    </tr>
    <tr>
        <td>5</td>
        <td>oEofndp</td>
    </tr>
    <tr>
        <td>6</td>
        <td>ih7Y69u56</td>
    </tr>
</table></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT count(1) FROM users
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> * postgresql://itversity_sms_user:***@localhost:5432/itversity_sms_db
1 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>count</th>
    </tr>
    <tr>
        <td>3</td>
    </tr>
</table></div></div>
</div>
</div>
<div class="section" id="overview-of-transactions">
<h2>Overview of Transactions<a class="headerlink" href="#overview-of-transactions" title="Permalink to this headline">¶</a></h2>
<p>Let us go through the details related to Transactions.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/FV84WNXgI_o?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<ul class="simple">
<li><p>We typically perform operations such as <code class="docutils literal notranslate"><span class="pre">COMMIT</span></code> and <code class="docutils literal notranslate"><span class="pre">ROLLBACK</span></code> via the applications.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMMIT</span></code> will persist the changes in the database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROLLBACK</span></code> will revert the uncommitted changes in the database.</p></li>
<li><p>We typically rollback the uncommitted changes in a transaction if there is any exception as part of the application logic flow.</p></li>
<li><p>For example, once the order is placed all the items that are added to shopping cart will be rolled back if the payment using credit card fails.</p></li>
<li><p>By default every operation is typically committed in Postgres. We will get into the details related to transaction as part of application development later.</p></li>
<li><p>Commands such as <code class="docutils literal notranslate"><span class="pre">COMMIT</span></code>, <code class="docutils literal notranslate"><span class="pre">ROLLBACK</span></code> typically comes under TCL (Transaction Control Language)</p></li>
</ul>
</div>
<div class="section" id="exercise-database-operations">
<h2>Exercise - Database Operations<a class="headerlink" href="#exercise-database-operations" title="Permalink to this headline">¶</a></h2>
<p>Let’s create a table and perform database operations using direct SQL.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><iframe width="560" height="315" src="https://www.youtube.com/embed/GIu6gH1EjV4?rel=0&amp;controls=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
</div></div>
</div>
<div class="section" id="exercise-1-create-table">
<h3>Exercise 1 - Create Table<a class="headerlink" href="#exercise-1-create-table" title="Permalink to this headline">¶</a></h3>
<p>Create table - <strong>courses</strong></p>
<ul class="simple">
<li><p>course_id - sequence generated integer and primary key</p></li>
<li><p>course_name - which holds alpha numeric or string values up to 60 characters</p></li>
<li><p>course_author - which holds the name of the author up to 40 characters</p></li>
<li><p>course_status - which holds one of these values (published, draft, inactive).</p></li>
<li><p>course_published_dt - which holds date type value.</p></li>
</ul>
<p>Provide the script as answer for this exercise.</p>
</div>
<div class="section" id="exercise-2-inserting-data">
<h3>Exercise 2 - Inserting Data<a class="headerlink" href="#exercise-2-inserting-data" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Insert data into courses using the data provided. Make sure id is system generated.</p></li>
</ul>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Course Name</p></th>
<th class="head"><p>Course Author</p></th>
<th class="head"><p>Course Status</p></th>
<th class="head"><p>Course Published Date</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Programming using Python</p></td>
<td><p>Bob Dillon</p></td>
<td><p>published</p></td>
<td><p>2020-09-30</p></td>
</tr>
<tr class="row-odd"><td><p>Data Engineering using Python</p></td>
<td><p>Bob Dillon</p></td>
<td><p>published</p></td>
<td><p>2020-07-15</p></td>
</tr>
<tr class="row-even"><td><p>Data Engineering using Scala</p></td>
<td><p>Elvis Presley</p></td>
<td><p>draft</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Programming using Scala</p></td>
<td><p>Elvis Presley</p></td>
<td><p>published</p></td>
<td><p>2020-05-12</p></td>
</tr>
<tr class="row-even"><td><p>Programming using Java</p></td>
<td><p>Mike Jack</p></td>
<td><p>inactive</p></td>
<td><p>2020-08-10</p></td>
</tr>
<tr class="row-odd"><td><p>Web Applications - Python Flask</p></td>
<td><p>Bob Dillon</p></td>
<td><p>inactive</p></td>
<td><p>2020-07-20</p></td>
</tr>
<tr class="row-even"><td><p>Web Applications - Java Spring</p></td>
<td><p>Mike Jack</p></td>
<td><p>draft</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Pipeline Orchestration - Python</p></td>
<td><p>Bob Dillon</p></td>
<td><p>draft</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Streaming Pipelines - Python</p></td>
<td><p>Bob Dillon</p></td>
<td><p>published</p></td>
<td><p>2020-10-05</p></td>
</tr>
<tr class="row-odd"><td><p>Web Applications - Scala Play</p></td>
<td><p>Elvis Presley</p></td>
<td><p>inactive</p></td>
<td><p>2020-09-30</p></td>
</tr>
<tr class="row-even"><td><p>Web Applications - Python Django</p></td>
<td><p>Bob Dillon</p></td>
<td><p>published</p></td>
<td><p>2020-06-23</p></td>
</tr>
<tr class="row-odd"><td><p>Server Automation - Ansible</p></td>
<td><p>Uncle Sam</p></td>
<td><p>published</p></td>
<td><p>2020-07-05</p></td>
</tr>
</tbody>
</table>
<p>Provide the insert statement(s) as answer for this exercise.</p>
</div>
<div class="section" id="exercise-3-updating-data">
<h3>Exercise 3 - Updating Data<a class="headerlink" href="#exercise-3-updating-data" title="Permalink to this headline">¶</a></h3>
<p>Update the status of all the <strong>draft courses</strong> related to Python and Scala to <strong>published</strong> along with the <strong>course_published_dt using system date</strong>.</p>
<p>Provide the update statement as answer for this exercise.</p>
</div>
<div class="section" id="exercise-4-deleting-data">
<h3>Exercise 4 - Deleting Data<a class="headerlink" href="#exercise-4-deleting-data" title="Permalink to this headline">¶</a></h3>
<p>Delete all the courses which are neither in draft mode nor published.</p>
<p>Provide the delete statement as answer for this exercise.</p>
<p>Validation - Get count of all published courses by author and make sure output is sorted in descending order by count.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">course_author</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">AS</span> <span class="n">course_count</span>
<span class="k">FROM</span> <span class="n">courses</span>
<span class="k">WHERE</span> <span class="n">course_status</span><span class="o">=</span> <span class="s1">&#39;published&#39;</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">course_author</span>
</pre></div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Course Author</p></th>
<th class="head"><p>Course Count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bob Dillon</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>Elvis Presley</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>Uncle Sam</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="01_getting_started.html" title="previous page">Getting Started</a>
    <a class='right-next' id="next-link" href="03_writing_basic_sql_queries.html" title="next page">Writing Basic SQL Queries</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>